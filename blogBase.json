{"singlePage": [], "startSite": "", "filingNum": "", "onePageListNum": 15, "commentLabelColor": "#006b75", "yearColorList": ["#bc4c00", "#0969da", "#1f883d", "#A333D0"], "i18n": "CN", "themeMode": "manual", "dayTheme": "light", "nightTheme": "dark", "urlMode": "pinyin", "script": "", "style": "", "head": "", "indexScript": "", "indexStyle": "", "bottomText": "", "showPostSource": 1, "iconList": {}, "UTC": 8, "rssSplit": "sentence", "exlink": {}, "needComment": 1, "allHead": "", "title": "Night1008", "subTitle": "\u9759\u4ee5\u4fee\u8eab\uff0c\u4fed\u4ee5\u517b\u5fb7", "avatarUrl": "https://github.githubassets.com/favicons/favicon.svg", "GMEEK_VERSION": "last", "postListJson": {"P2": {"htmlDir": "docs/post/ru-he-jin-xing-qian-hou-duan-jing-tai-zi-yuan-fen-li.html", "labels": ["\u5f00\u53d1\u601d\u8def"], "postTitle": "\u5982\u4f55\u8fdb\u884c\u524d\u540e\u7aef\u9759\u6001\u8d44\u6e90\u5206\u79bb", "postUrl": "post/ru-he-jin-xing-qian-hou-duan-jing-tai-zi-yuan-fen-li.html", "postSourceUrl": "https://github.com/night1008/night1008.github.io/issues/2", "commentNum": 0, "wordCount": 3094, "description": "\u6211\u76ee\u524d\u5f00\u53d1\u7684\u5e73\u53f0\u7684\u524d\u7aef\u9759\u6001\u8d44\u6e90\u662f\u4f7f\u7528 [go embed](https://pkg.go.dev/embed) \u673a\u5236\u5185\u5d4c\u5230\u540e\u7aef\u670d\u52a1\u4e2d\uff0c\r\n\u5f53\u8bbf\u95ee\u91cf\u6bd4\u8f83\u5927\u7684\u65f6\u5019\uff0c\u670d\u52a1\u5668\u4f1a\u6709\u6bd4\u8f83\u5927\u7684 IO \u6d88\u8017\uff0c\u56e0\u6b64\u8fdb\u884c\u524d\u7aef\u9759\u6001\u8d44\u6e90\u5206\u79bb\u3002", "top": 0, "createdAt": 1707885648, "style": "", "script": "", "head": "", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "createdDate": "2024-02-14", "dateLabelColor": "#bc4c00"}, "P1": {"htmlDir": "docs/post/ru-he-shi-xian-chao-guan-deng-lu.html", "labels": ["\u5f00\u53d1\u601d\u8def"], "postTitle": "\u5982\u4f55\u5b9e\u73b0\u8d85\u7ba1\u767b\u5f55", "postUrl": "post/ru-he-shi-xian-chao-guan-deng-lu.html", "postSourceUrl": "https://github.com/night1008/night1008.github.io/issues/1", "commentNum": 0, "wordCount": 526, "description": "\u5bf9\u4e8e ToC \u5e73\u53f0\uff0c\u968f\u7740\u63a5\u5165\u5e94\u7528\u7684\u589e\u52a0\uff0c\u7528\u6237\u53cd\u9988\u7684\u95ee\u9898\u4e5f\u53d8\u591a\uff0c\r\n\u65e5\u5fd7\u6ca1\u6709\u8bb0\u5f55\u5230\u7684\u8bdd\uff0c\u52a0\u4e0a\u73b0\u6709\u7684\u6743\u9650\u4f53\u7cfb\u4e0b\u67e5\u770b\u95ee\u9898\u4e0d\u65b9\u4fbf\uff0c\r\n\u5f88\u96be\u590d\u73b0\u95ee\u9898\uff0c\u9700\u8981\u4e00\u4e2a\u4e2a\u52a0\u5230\u5bf9\u5e94\u7684\u5e94\u7528\u4e2d\u3002", "top": 0, "createdAt": 1707972048, "style": "", "script": "", "head": "", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "createdDate": "2024-02-15", "dateLabelColor": "#bc4c00"}, "P5": {"htmlDir": "docs/post/Go -yu-yan-xia-ru-he-ti-jiao-bao-han-fan-yin-hao-de-duo-xing-zi-fu-chuan-biao-dan.html", "labels": ["\u5f00\u53d1\u601d\u8def"], "postTitle": "Go \u8bed\u8a00\u4e0b\u5982\u4f55\u63d0\u4ea4\u5305\u542b\u53cd\u5f15\u53f7\u7684\u591a\u884c\u5b57\u7b26\u4e32\u8868\u5355", "postUrl": "post/Go%20-yu-yan-xia-ru-he-ti-jiao-bao-han-fan-yin-hao-de-duo-xing-zi-fu-chuan-biao-dan.html", "postSourceUrl": "https://github.com/night1008/night1008.github.io/issues/5", "commentNum": 0, "wordCount": 245, "description": "\u611f\u89c9 Go \u8bed\u8a00\u5bf9\u4e8e\u591a\u884c\u5b57\u7b26\u4e32\u7684\u652f\u6301\u4e0d\u662f\u5f88\u53cb\u597d\u3002", "top": 0, "createdAt": 1713067054, "style": "", "script": "", "head": "", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "createdDate": "2024-04-14", "dateLabelColor": "#bc4c00"}, "P6": {"htmlDir": "docs/post/clickhouse-go -mou-xie-cha-xun-bu-hui-fan-hui-cha-xun-cuo-wu.html", "labels": ["\u5f00\u53d1\u601d\u8def"], "postTitle": "clickhouse-go \u67d0\u4e9b\u67e5\u8be2\u4e0d\u4f1a\u8fd4\u56de\u67e5\u8be2\u9519\u8bef", "postUrl": "post/clickhouse-go%20-mou-xie-cha-xun-bu-hui-fan-hui-cha-xun-cuo-wu.html", "postSourceUrl": "https://github.com/night1008/night1008.github.io/issues/6", "commentNum": 0, "wordCount": 1960, "description": "\u4f7f\u7528 [clickhouse-go](https://github.com/ClickHouse/clickhouse-go) \u4f5c\u4e3a\u5ba2\u6237\u7aef\u8fdb\u884c clickhouse \u67e5\u8be2\u65f6\uff0c\u53d1\u73b0\u67d0\u4e9b\u67e5\u8be2\u4e0d\u4f1a\u8fd4\u56de\u67e5\u8be2\u9519\u8bef\uff0c\r\n1. \u67e5\u8be2\u65f6\u95f4\u8d85\u8fc7\u6700\u5927\u67e5\u8be2\u65f6\u95f4\u53c2\u6570 (max_execution_time)\r\n2. \u975e\u6cd5\u67e5\u8be2\uff0c\u6bd4\u5982 sleep(300)\r\n\r\n\u4e0b\u9762\u7ed9\u793a\u4f8b\uff0c\r\n\r\n```go\r\npackage main\r\n\r\nimport (\r\n\t'context'\r\n\t'fmt'\r\n\t'log'\r\n\r\n\t'github.com/ClickHouse/clickhouse-go/v2'\r\n)\r\n\r\nfunc main() {\r\n\tdb := clickhouse.OpenDB(&clickhouse.Options{\r\n\t\tAddr: []string{'127.0.0.1:9000'},\r\n\t\tAuth: clickhouse.Auth{\r\n\t\t\tDatabase: 'default',\r\n\t\t\tUsername: 'default',\r\n\t\t\tPassword: '',\r\n\t\t},\r\n\t\tSettings: clickhouse.Settings{\r\n\t\t\t'join_use_nulls': 1,\r\n\t\t},\r\n\t})\r\n\r\n\tctx := context.Background()\r\n\tconn, err := db.Conn(ctx)\r\n\tif err != nil {\r\n\t\tlog.Fatal(err)\r\n\t}\r\n\tdefer conn.Close()\r\n\r\n\tsql := 'select sleep(300)'\r\n\trows, err := conn.QueryContext(ctx, sql)\r\n\tif err != nil {\r\n\t\tlog.Fatal(err)\r\n\t}\r\n\tdefer rows.Close()\r\n\r\n\tfmt.Println(rows.Columns())\r\n}\r\n```\r\n\r\n\u671f\u671b\u7ed3\u679c\u662f\uff0c\r\n```\r\ncode: 160, message: The maximum sleep time is 3000000 microseconds. Requested: 300: while executing 'FUNCTION sleep(300 :: 0) -> sleep(300) UInt8 : 1'\r\n```\r\n\r\n\u6267\u884c\u7ed3\u679c\u662f\uff0c\r\n```\r\n[sleep(300)] <nil>\r\n```\r\n\r\n---\r\n\r\n\u95ee\u4e86\u5b98\u65b9\uff0c\u8bf4\u662f\uff0c\r\nSince the error is not thrown in ClickHouse at the time of query retrieval but later with the data packet, the client has to process data received from the server explicitly using rows.Next().\r\n\r\nSee code snippet:\r\n```go\r\npackage issues\r\n\r\nimport (\r\n\t'context'\r\n\t'testing'\r\n\r\n\tclickhouse_tests 'github.com/ClickHouse/clickhouse-go/v2/tests'\r\n\t'github.com/stretchr/testify/assert'\r\n\t'github.com/stretchr/testify/require'\r\n)\r\n\r\nfunc Test1268(t *testing.T) {\r\n\tconn, err := clickhouse_tests.GetDatabaseSQLConnection('issues', nil, nil, nil)\r\n\trequire.NoError(t, err)\r\n\r\n\trows, err := conn.QueryContext(context.Background(), 'select sleep(300)')\r\n\trequire.NoError(t, err)\r\n\tdefer rows.Close()\r\n\r\n\tfor rows.Next() {\r\n\t\tif rows.Err() != nil {\r\n\t\t\tbreak\r\n\t\t}\r\n\t}\r\n\r\n\tassert.ErrorContains(t, rows.Err(), 'code: 160, message: The maximum sleep time is 3000000 microseconds.')\r\n}\r\n```\u3002", "top": 0, "createdAt": 1713067207, "style": "", "script": "", "head": "", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "createdDate": "2024-04-14", "dateLabelColor": "#bc4c00"}, "P7": {"htmlDir": "docs/post/ru-he-zai- iOS -shang-an-zhuang- PokeMMO.html", "labels": ["\u5f00\u53d1\u601d\u8def"], "postTitle": "\u5982\u4f55\u5728 iOS \u4e0a\u5b89\u88c5 PokeMMO", "postUrl": "post/ru-he-zai-%20iOS%20-shang-an-zhuang-%20PokeMMO.html", "postSourceUrl": "https://github.com/night1008/night1008.github.io/issues/7", "commentNum": 0, "wordCount": 270, "description": "\u51c6\u5907\u6761\u4ef6\uff1a\r\n1.  [PokeMMO Account](https://pokemmo.com/en/)\r\n2. [AltStore](https://iosdroids.com/altstore/)\r\n3. [PokeMMO ROMS](https://iosdroids.com/pokemmo-ios/)\r\n\r\n\u627e\u4e86\u597d\u4e45\u603b\u7b97\u5728 [How to Download & Install PokeMMO on iOS?](https://iosdroids.com/pokemmo-ios/) \u627e\u5230\u53ef\u4e0b\u8f7d\u7684 PokeMMO ROMS.\r\n\u3002", "top": 0, "createdAt": 1713106547, "style": "", "script": "", "head": "", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "createdDate": "2024-04-14", "dateLabelColor": "#bc4c00"}, "P8": {"htmlDir": "docs/post/fen-xi-ping-tai-zhong-de-ye-wu-guan-xi-tu.html", "labels": ["\u5f00\u53d1\u601d\u8def"], "postTitle": "\u5206\u6790\u5e73\u53f0\u4e2d\u7684\u4e1a\u52a1\u5173\u7cfb\u56fe", "postUrl": "post/fen-xi-ping-tai-zhong-de-ye-wu-guan-xi-tu.html", "postSourceUrl": "https://github.com/night1008/night1008.github.io/issues/8", "commentNum": 0, "wordCount": 441, "description": "### \u7528\u6237\u548c\u5e94\u7528\u89d2\u8272\u4e4b\u95f4\u7684\u5173\u7cfb\r\n![user_role_permission](https://github.com/night1008/night1008.github.io/assets/3940006/214e5136-2ac8-453f-8ddb-e4cd865e4027)\r\n\r\n---\r\n\r\n### \u8868\u548c\u5c5e\u6027\u4e4b\u95f4\u7684\u5173\u7cfb\r\n![event_property](https://github.com/night1008/night1008.github.io/assets/3940006/33933ff6-4c26-434b-a190-3ed98f2b5bc9)\r\n\r\n\r\n---\r\n\r\n### \u770b\u677f\u7a7a\u95f4\u548c\u770b\u677f\u4e4b\u95f4\u7684\u5173\u7cfb\r\n![dashboard_space](https://github.com/night1008/night1008.github.io/assets/3940006/40200478-f311-40a1-ba05-1e3e0a80a394)\r\n\u3002", "top": 0, "createdAt": 1714036652, "style": "", "script": "", "head": "", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "createdDate": "2024-04-25", "dateLabelColor": "#bc4c00"}, "P9": {"htmlDir": "docs/post/Go -you-qu-de-dai-ma-pian-duan.html", "labels": ["\u5f00\u53d1\u601d\u8def"], "postTitle": "Go \u6709\u8da3\u7684\u4ee3\u7801\u7247\u6bb5", "postUrl": "post/Go%20-you-qu-de-dai-ma-pian-duan.html", "postSourceUrl": "https://github.com/night1008/night1008.github.io/issues/9", "commentNum": 0, "wordCount": 745, "description": "### \u53ef\u4ee5\u5bf9 error \u8fdb\u884c switch \u5224\u65ad\r\n\r\n\u6765\u6e90\uff1ahttps://github.com/prashanthpai/sqlcache/blob/4bf943bfd00f02394a480c5437e86af4b5be074c/cache_redis.go#L24\r\n\r\n```go\r\nfunc (r *Redis) Get(ctx context.Context, key string) (*cache.Item, bool, error) {\r\n\tb, err := r.c.Get(ctx, r.keyPrefix+key).Bytes()\r\n\tswitch err {\r\n\tcase nil:\r\n\t\tvar item cache.Item\r\n\t\tif err := msgpack.Unmarshal(b, &item); err != nil {\r\n\t\t\treturn nil, true, err\r\n\t\t}\r\n\t\treturn &item, true, nil\r\n\tcase redis.Nil:\r\n\t\treturn nil, false, nil\r\n\tdefault:\r\n\t\treturn nil, false, err\r\n\t}\r\n}\r\n```\r\n\r\n---\r\n\r\n### \u533f\u540d\u7ed3\u6784\u4f53\r\n\r\n\u6765\u6e90\uff1ahttps://quii.gitbook.io/learn-go-with-tests/go-fundamentals/concurrency#channels\r\n\r\n```go\r\ntype result struct {\r\n\tstring\r\n\tbool\r\n}\r\n\r\nvar r result\r\nfmt.Println(r.string, r.bool)\r\n```\u3002", "top": 0, "createdAt": 1717246865, "style": "", "script": "", "head": "", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "createdDate": "2024-06-01", "dateLabelColor": "#bc4c00"}, "P10": {"htmlDir": "docs/post/Go -ru-he-shi-xian- Clickhouse -cha-xun-huan-cun.html", "labels": ["\u5f00\u53d1"], "postTitle": "Go \u5982\u4f55\u5b9e\u73b0 Clickhouse \u67e5\u8be2\u7f13\u5b58", "postUrl": "post/Go%20-ru-he-shi-xian-%20Clickhouse%20-cha-xun-huan-cun.html", "postSourceUrl": "https://github.com/night1008/night1008.github.io/issues/10", "commentNum": 0, "wordCount": 4539, "description": "**\u6574\u4f53\u601d\u8def\uff1a\u5148\u5224\u65ad\u662f\u5426\u547d\u4e2d\u7f13\u5b58\uff0c\u6ca1\u6709\u7684\u8bdd\u518d\u8fdb\u5165\u67e5\u8be2\u961f\u5217**\r\n\r\n\u4f9d\u8d56\u7684\u5305\r\n```\r\nhttps://github.com/ClickHouse/ClickHouse\r\n\r\nhttps://github.com/prashanthpai/sqlcache => https://github.com/night1008/sqlcache\r\n\r\nhttps://github.com/DATA-DOG/go-sqlmock\r\n\r\nhttps://github.com/blockloop/scan\r\n```\r\n\r\n\u73b0\u5728\u7684\u95ee\u9898\u662f clickhouse \u7684\u67e5\u8be2\u7ed3\u679c\u53ef\u80fd\u8fd4\u56de\u590d\u6742\u7c7b\u578b\uff0c\u6bd4\u5982 Map(String, UInt8)\uff0c\r\n\u5982\u679c\u547d\u4e2d\u7f13\u5b58\uff0c\u7f13\u5b58\u7684\u7ed3\u679c\u4e3a `driver.Rows`\uff0c\u9700\u8981\u8f6c\u6362\u6210 `*sql.Rows` \u65b9\u4fbf\u540e\u7eed\u4f7f\u7528\uff0c\r\n\u56e0\u6b64\u60f3\u5230\u901a\u8fc7 `sqlmock` \u7684\u65b9\u5f0f\uff0c\u4f46\u662f\u9ed8\u8ba4\u7684 `value converter` \u662f `driver.DefaultParameterConverter`\uff0c\u53ea\u80fd\u8f6c\u6362\u57fa\u7840\u7c7b\u578b\uff0c\r\n\u590d\u6742\u7c7b\u578b\u4e5f\u6ca1\u6709\u5b9a\u4e49\u4e13\u95e8\u7528\u4e8e\u89e3\u6790\u7684\u7ed3\u6784\u4f53\uff0c\u4f1a\u62a5\u8bf8\u5982\u4ee5\u4e0b\u7684\u9519\u8bef\uff0c\r\n\r\n> panic: row #1, column #2 ('mapper') type map[string]uint8: unsupported type map[string]uint8, a map\r\n\r\n\u597d\u5728 `go-sqlmock` \u53ef\u4ee5\u6307\u5b9a `ValueConverterOption`\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u628a `driver.Rows` \u8f6c\u6362\u6210 `*sql.Rows` \u4e86\u3002", "top": 0, "createdAt": 1717915402, "style": "", "script": "", "head": "", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "createdDate": "2024-06-09", "dateLabelColor": "#bc4c00"}, "P11": {"htmlDir": "docs/post/ru-he-shi-yong- GORM -chuang-jian-huo-zhe-geng-xin-shu-ju-ku-ji-lu.html", "labels": ["\u5f00\u53d1"], "postTitle": "\u5982\u4f55\u4f7f\u7528 GORM \u521b\u5efa\u6216\u8005\u66f4\u65b0\u6570\u636e\u5e93\u8bb0\u5f55", "postUrl": "post/ru-he-shi-yong-%20GORM%20-chuang-jian-huo-zhe-geng-xin-shu-ju-ku-ji-lu.html", "postSourceUrl": "https://github.com/night1008/night1008.github.io/issues/11", "commentNum": 0, "wordCount": 1338, "description": "\u5199\u4e1a\u52a1\u8fc7\u7a0b\u4e2d\uff0c\u7ecf\u8fc7\u4f1a\u9047\u5230\u5f53\u6570\u636e\u4e0d\u5b58\u5728\u5219\u521b\u5efa\u8bb0\u5f55\uff0c\u5df2\u5b58\u5728\u5219\u66f4\u65b0\u8bb0\u5f55\u7684\u60c5\u51b5\uff0c\r\n\r\n\u4e00\u5f00\u59cb\u4f7f\u7528\u4e00\u4e0b\u4ee3\u7801\u4e2d\u7684\u7b2c\u4e00\u79cd\u65b9\u5f0f\uff0c\u53d1\u73b0\u6ca1\u751f\u6548\uff0c\u540e\u9762\u6539\u6210\u7b2c\u4e8c\u79cd\u624d\u751f\u6548\uff0c\u5728\u6b64\u8bb0\u5f55\u4e00\u4e0b\u3002", "top": 0, "createdAt": 1719029544, "style": "", "script": "", "head": "", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "createdDate": "2024-06-22", "dateLabelColor": "#bc4c00"}, "P12": {"htmlDir": "docs/post/Go mod -ru-he-ti-huan- fork -de-bao-he-ban-ben.html", "labels": ["\u5f00\u53d1"], "postTitle": "Go mod \u5982\u4f55\u66ff\u6362 fork \u7684\u5305\u548c\u7248\u672c", "postUrl": "post/Go%20mod%20-ru-he-ti-huan-%20fork%20-de-bao-he-ban-ben.html", "postSourceUrl": "https://github.com/night1008/night1008.github.io/issues/12", "commentNum": 0, "wordCount": 828, "description": "\u4ee5  `github.com/prashanthpai/sqlcache` \u4e3a\u4f8b\uff0c\u60f3\u66ff\u6362\u6210 fork \u7684\u5305 `github.com/night1008/sqlcache`\uff0c\r\n\u5047\u8bbe\u5f53\u524d\u8be5\u5305\u7684\u7248\u672c\u4e3a `v0.0.0`\r\n\r\n#### \u7b2c\u4e00\u6b65\r\n```\r\ngo mod edit -replace github.com/prashanthpai/sqlcache@v0.0.0=github.com/night1008/sqlcache@master\r\n```\r\n\r\n---\r\n\r\n#### \u7b2c\u4e8c\u6b65\r\n```\r\ngo get -u github.com/night1008/sqlcache\r\n```\r\n\r\n\u4f1a\u6709\u4ee5\u4e0b\u63d0\u793a\r\n```\r\ngo: downloading github.com/night1008/sqlcache v0.0.0-20240623031410-4d47c940a2d7\r\ngo: github.com/night1008/sqlcache@v0.0.0-20240623031410-4d47c940a2d7: parsing go.mod:\r\n\tmodule declares its path as: github.com/prashanthpai/sqlcache\r\n\t        but was required as: github.com/night1008/sqlcache\r\n```\r\n\r\n---\r\n\r\n#### \u7b2c\u4e09\u6b65\r\n\r\n\u624b\u52a8\u628a v0.0.0-20240623031410-4d47c940a2d7 \u66ff\u6362\u5230 go.mod `replace github.com/prashanthpai/sqlcache v0.0.0 => github.com/night1008/sqlcache master` \u8fd9\u4e00\u884c\u7684 master\r\n\r\n---\r\n\r\n#### \u7b2c\u56db\u6b65\r\n```\r\ngo mod tidy\r\n```\u3002", "top": 0, "createdAt": 1719384747, "style": "", "script": "", "head": "", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "createdDate": "2024-06-26", "dateLabelColor": "#bc4c00"}, "P13": {"htmlDir": "docs/post/Go -ru-he-shi-xian-shi-jian-fen-xi-fen-zu-pai-xu.html", "labels": ["\u5f00\u53d1"], "postTitle": "Go \u5982\u4f55\u5b9e\u73b0\u4e8b\u4ef6\u5206\u6790\u5206\u7ec4\u6392\u5e8f", "postUrl": "post/Go%20-ru-he-shi-xian-shi-jian-fen-xi-fen-zu-pai-xu.html", "postSourceUrl": "https://github.com/night1008/night1008.github.io/issues/13", "commentNum": 0, "wordCount": 3121, "description": "\u4e8b\u4ef6\u5206\u6790\u8fc7\u7a0b\u4e2d\uff0c\u4f1a\u5bf9\u5206\u7ec4\u8fdb\u884c\u6392\u5e8f\uff0c\u6709\u5982\u4e0b\u7684\u6392\u5e8f\u89c4\u5219\uff0c\r\n\r\n1. \u6309\u7b2c\u4e00\u4e2a\u6307\u6807\u503c\u7684\u6b63\u5e8f\u6392\u5217\r\n2. \u6309\u7b2c\u4e00\u4e2a\u6307\u6807\u503c\u7684\u5012\u5e8f\u6392\u5217\r\n3. \u6309\u5206\u7ec4\u503c\u7684\u6b63\u5e8f\u6392\u5217\r\n4. \u6309\u5206\u7ec4\u503c\u7684\u5012\u5e8f\u6392\u5217\r\n\r\n\u5206\u7ec4\u662f `[][]string` \u7c7b\u578b\uff0c\u503c\u662f `float64` \u7c7b\u578b\uff0c\r\n\r\n\u4e0b\u9762\u8bb0\u5f55\u4e0b\u4e3b\u8981\u7684\u6392\u5e8f\u4ee3\u7801\r\n\r\n```go\r\nconst (\r\n\tPropertyTypeInteger              = 'integer'                // \u6574\u6570\u7c7b\u578b\r\n\tPropertyTypeFloat                = 'float'                  // \u6d6e\u70b9\u7c7b\u578b\uff0c\u5bf9\u5e94 float64 \u6216 double\r\n\tPropertyTypeNumber               = 'number'                 // \u6d6e\u70b9\u7c7b\u578b\uff0c\u5bf9\u5e94 float64 \u6216 double\r\n)\r\n\r\ntype EventModelQueryGroupBy struct {\r\n\tName              string    `json:'name' example:'_time'`\r\n\tType              string    `json:'type' example:'timestamp'`\r\n\tTitle             string    `json:'title' example:'\u4e8b\u4ef6\u53d1\u751f\u65f6\u95f4'`\r\n\tTableType         string    `json:'table_type' example:'event'`\r\n\tMetaType          string    `json:'meta_type' example:'custom'`\r\n}\r\n\r\n// \u6839\u636e\u5206\u7ec4\u503c\u6392\u5e8f\r\nfunc sortUnionGroupsByValue(unionGroups [][]string, unionGroupsValueMap map[string]float64, unionGroupsJoinSymbol string, sortByAsc bool) [][]string {\r\n\tnewUnionGroups := make([][]string, len(unionGroups))\r\n\tcopy(newUnionGroups, unionGroups)\r\n\tsort.Slice(newUnionGroups, func(i, j int) bool {\r\n\t\tsortValue := false\r\n\t\tif sortByAsc {\r\n\t\t\tsortValue = unionGroupsValueMap[strings.Join(newUnionGroups[i], unionGroupsJoinSymbol)] < unionGroupsValueMap[strings.Join(newUnionGroups[j], unionGroupsJoinSymbol)]\r\n\t\t} else {\r\n\t\t\tsortValue = unionGroupsValueMap[strings.Join(newUnionGroups[i], unionGroupsJoinSymbol)] > unionGroupsValueMap[strings.Join(newUnionGroups[j], unionGroupsJoinSymbol)]\r\n\t\t}\r\n\t\treturn sortValue\r\n\t})\r\n\treturn newUnionGroups\r\n}\r\n\r\n// \u6839\u636e\u5206\u7ec4\u540d\u79f0\u6392\u5e8f\r\nfunc sortUnionGroupsByGroup(unionGroups [][]string, unionGroupBy []*EventModelQueryGroupBy, sortByAsc bool) [][]string {\r\n\tnewUnionGroups := make([][]string, len(unionGroups))\r\n\tcopy(newUnionGroups, unionGroups)\r\n\tsort.Slice(newUnionGroups, func(i, j int) bool {\r\n\t\tsortValue := false\r\n\t\tfor index := range unionGroupBy {\r\n\t\t\tif newUnionGroups[i][index] != newUnionGroups[j][index] {\r\n\t\t\t\tswitch unionGroupBy[index].Type {\r\n\t\t\t\tcase PropertyTypeInteger, PropertyTypeNumber:\r\n\t\t\t\t\tif sortByAsc {\r\n\t\t\t\t\t\tsortValue = sortValue || parseNumberRangeSortValue(newUnionGroups[i][index]) < parseNumberRangeSortValue(newUnionGroups[j][index])\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsortValue = sortValue || parseNumberRangeSortValue(newUnionGroups[i][index]) > parseNumberRangeSortValue(newUnionGroups[j][index])\r\n\t\t\t\t\t}\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tif sortByAsc {\r\n\t\t\t\t\t\tsortValue = sortValue || newUnionGroups[i][index] < newUnionGroups[j][index]\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsortValue = sortValue || newUnionGroups[i][index] > newUnionGroups[j][index]\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tbreak\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn sortValue\r\n\t})\r\n\treturn newUnionGroups\r\n}\r\n\r\n// \u5bf9\u6570\u503c\u7c7b\u578b\u5206\u7ec4\u503c\u62c6\u5206\u5f97\u5230\u6392\u5e8f\u503c [-\u221e, 100), [-1, 2), 100, (null)\r\nfunc parseNumberRangeSortValue(valueStr string) float64 {\r\n\tfirstPartValue := strings.SplitN(valueStr, ',', 2)[0]\r\n\tfirstPartValue = strings.TrimLeft(firstPartValue, '[')\r\n\tswitch firstPartValue {\r\n\tcase '-\u221e':\r\n\t\treturn math.Inf(-1)\r\n\tcase '(null)':\r\n\t\treturn math.NaN()\r\n\tdefault:\r\n\t\tvalue, err := strconv.ParseFloat(firstPartValue, 64)\r\n\t\tif err != nil {\r\n\t\t\treturn math.Inf(-1)\r\n\t\t}\r\n\t\treturn value\r\n\t}\r\n}\r\n```\u3002", "top": 0, "createdAt": 1720076463, "style": "", "script": "", "head": "", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "createdDate": "2024-07-04", "dateLabelColor": "#bc4c00"}, "P14": {"htmlDir": "docs/post/Go recover from panic.html", "labels": ["\u5f00\u53d1"], "postTitle": "Go recover from panic", "postUrl": "post/Go%20recover%20from%20panic.html", "postSourceUrl": "https://github.com/night1008/night1008.github.io/issues/14", "commentNum": 0, "wordCount": 479, "description": "```go\r\npackage main\r\n\r\nimport (\r\n\t'fmt'\r\n\t'runtime/debug'\r\n\t'time'\r\n\r\n\t'github.com/rs/zerolog/log'\r\n)\r\n\r\nfunc Recover() {\r\n\tif r := recover(); r != nil {\r\n\t\tdebugStack := string(debug.Stack())\r\n\t\tfmt.Println(debugStack)\r\n\t\tlog.Error().Err(fmt.Errorf('%s', debugStack)).Msg('recover from panic')\r\n\t}\r\n}\r\n\r\nfunc main() {\r\n\tgo func() {\r\n\t\tdefer Recover()\r\n\t\tvar ss []string\r\n\t\tfmt.Println(ss[1])\r\n\t}()\r\n\r\n\ttime.Sleep(100 * time.Millisecond)\r\n\r\n\tfmt.Println('===> enter end')\r\n}\r\n```\u3002", "top": 0, "createdAt": 1720171836, "style": "", "script": "", "head": "", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "createdDate": "2024-07-05", "dateLabelColor": "#bc4c00"}, "P15": {"htmlDir": "docs/post/kan-guo-de-dian-ying-he-ji.html", "labels": ["\u751f\u6d3b"], "postTitle": "\u770b\u8fc7\u7684\u7535\u5f71\u5408\u96c6", "postUrl": "post/kan-guo-de-dian-ying-he-ji.html", "postSourceUrl": "https://github.com/night1008/night1008.github.io/issues/15", "commentNum": 0, "wordCount": 865, "description": "\u7535\u5f71\u94fe\u63a5\u5230 [\u8c46\u74e3\u7535\u5f71](https://movie.douban.com)\r\n---\r\n\r\n- [ ] [\u4e5d\u9f99\u57ce\u5be8\u4e4b\u56f4\u57ce](https://movie.douban.com/subject/24284175) (\u4e00\u822c)\r\n- [ ] [\u5e74\u4f1a\u4e0d\u80fd\u505c](https://movie.douban.com/subject/35725869) (\u8fd8\u53ef\u4ee5)\r\n- [ ] [\u4e09\u5927\u961f](https://movie.douban.com/subject/35208463) (\u8fd8\u53ef\u4ee5)\r\n- [ ] [\u5b64\u6ce8\u4e00\u63b7](https://movie.douban.com/subject/35267224) (\u8fd8\u53ef\u4ee5)\r\n- [ ] [\u7011\u5e03](https://movie.douban.com/subject/35242938) (\u8fd8\u53ef\u4ee5)\r\n- [ ] [\u5468\u5904\u9664\u4e09\u5bb3](https://movie.douban.com/subject/36151692) (\u8fd8\u53ef\u4ee5)\r\n- [ ] [\u8001\u72d0\u72f8](https://movie.douban.com/subject/35611467) (\u4e0d\u9519)\r\n- [ ] [\u7834\u5893](https://movie.douban.com/subject/35490167) (\u8fd8\u53ef\u4ee5)\r\n- [ ] [\u9996](https://movie.douban.com/subject/35359717) (\u8fd8\u53ef\u4ee5)\r\n- [ ] [\u6c99\u4e181](https://movie.douban.com/subject/3001114) (\u8fd8\u53ef\u4ee5)\r\n- [ ] [\u6c99\u4e182](https://movie.douban.com/subject/35575567) (\u8fd8\u53ef\u4ee5)\r\n- [ ] [\u6708\u6ee1\u8f69\u5c3c\u8bd7](https://movie.douban.com/subject/3777800) (\u8fd8\u53ef\u4ee5)\r\n- [ ] [\u56e0\u679c\u62a5\u5e94 Maharaja](https://movie.douban.com/subject/36934908/) (\u8fd8\u4e0d\u9519)\u3002", "top": 0, "createdAt": 1720277993, "style": "", "script": "", "head": "", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "createdDate": "2024-07-06", "dateLabelColor": "#bc4c00"}, "P16": {"htmlDir": "docs/post/Clickhouse -liu-cun-fen-xi-zhong-ru-he-ji-suan-fen-xi-zhu-ti-de-liu-shi-shu.html", "labels": ["\u5f00\u53d1"], "postTitle": "Clickhouse \u7559\u5b58\u5206\u6790\u4e2d\u5982\u4f55\u8ba1\u7b97\u5206\u6790\u4e3b\u4f53\u7684\u6d41\u5931\u6570", "postUrl": "post/Clickhouse%20-liu-cun-fen-xi-zhong-ru-he-ji-suan-fen-xi-zhu-ti-de-liu-shi-shu.html", "postSourceUrl": "https://github.com/night1008/night1008.github.io/issues/16", "commentNum": 0, "wordCount": 2376, "description": "### \u80cc\u666f\r\n\r\n\u5148\u660e\u786e\u7559\u5b58\u5206\u6790\u76f8\u5173\u7684\u6982\u5ff5\r\n**\u7559\u5b58\u5206\u6790**\uff1a\u8861\u91cf\u4e0d\u540c\u6279\u6b21\u65b0\u589e\u7528\u6237\u7684\u6570\u636e\u8868\u73b0\uff0c\u6700\u5e38\u89c1\u7684\u5c31\u662f\u7559\u5b58\u7387\r\n**\u5206\u6790\u4e3b\u4f53**\uff1a\u89e6\u53d1\u4e8b\u4ef6\u7684\u4e3b\u4f53\uff0c\u6bd4\u5982\u7528\u6237\r\n**\u521d\u59cb\u4e8b\u4ef6**\uff1a\u4ee3\u8868\u65b0\u589e\u7684\u4e8b\u4ef6\uff0c\u6bd4\u5982\u7528\u6237\u6ce8\u518c\r\n**\u56de\u8bbf\u4e8b\u4ef6**\uff1a\u4ee3\u8868\u6d3b\u8dc3\u7684\u4e8b\u4ef6\uff0c\u6bd4\u5982\u7528\u6237\u767b\u5f55\r\n\r\n---\r\n\r\n### \u9700\u6c42\r\n\r\n\u4ea7\u54c1\u7ed9\u51fa\u7684\u6d41\u5931\u5b9a\u4e49\u4e3a\uff1a\u67d0\u5929\u5b8c\u6210\u4e86\u521d\u59cb\u4e8b\u4ef6\u7684\u5206\u6790\u4e3b\u4f53\uff0c\u5728\u521d\u59cb\u4e8b\u4ef6\u65e5\u671f\u540e\u7684\u7b2c 1 \u65e5\u81f3\u7b2c N \u65e5\u90fd\u6ca1\u6709\u5b8c\u6210\u201c\u56de\u8bbf\u4e8b\u4ef6\u201d\uff0c\u5373\u4e3a\u7b2c N \u65e5\u7684\u201c\u6d41\u5931\u7528\u6237\u201d\u3002", "top": 0, "createdAt": 1724055907, "style": "", "script": "", "head": "", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "createdDate": "2024-08-19", "dateLabelColor": "#bc4c00"}, "P17": {"htmlDir": "docs/post/Clickhouse -liu-cun-fen-xi-zhong-ru-he-ji-suan-fen-xi-zhu-ti-de-liu-cun-qing-kuang.html", "labels": ["\u5f00\u53d1"], "postTitle": "Clickhouse \u7559\u5b58\u5206\u6790\u4e2d\u5982\u4f55\u8ba1\u7b97\u5206\u6790\u4e3b\u4f53\u7684\u7559\u5b58\u60c5\u51b5", "postUrl": "post/Clickhouse%20-liu-cun-fen-xi-zhong-ru-he-ji-suan-fen-xi-zhu-ti-de-liu-cun-qing-kuang.html", "postSourceUrl": "https://github.com/night1008/night1008.github.io/issues/17", "commentNum": 0, "wordCount": 3434, "description": "## \u80cc\u666f\r\n\r\n\u5148\u660e\u786e\u7559\u5b58\u5206\u6790\u76f8\u5173\u7684\u6982\u5ff5\uff0c\r\n**\u7559\u5b58\u5206\u6790**\uff1a\u8861\u91cf\u4e0d\u540c\u6279\u6b21\u65b0\u589e\u7528\u6237\u7684\u6570\u636e\u8868\u73b0\uff0c\u6700\u5e38\u89c1\u7684\u5c31\u662f\u7559\u5b58\u7387\r\n**\u5206\u6790\u4e3b\u4f53**\uff1a\u89e6\u53d1\u4e8b\u4ef6\u7684\u4e3b\u4f53\uff0c\u6bd4\u5982\u7528\u6237\r\n**\u521d\u59cb\u4e8b\u4ef6**\uff1a\u4ee3\u8868\u65b0\u589e\u7684\u4e8b\u4ef6\uff0c\u6bd4\u5982\u7528\u6237\u6ce8\u518c\r\n**\u56de\u8bbf\u4e8b\u4ef6**\uff1a\u4ee3\u8868\u6d3b\u8dc3\u7684\u4e8b\u4ef6\uff0c\u6bd4\u5982\u7528\u6237\u767b\u5f55\r\n**\u56de\u8bbf\u7528\u6237\u540c\u65f6\u53c2\u4e0e\u4e8b\u4ef6**\uff1a\u4ee3\u8868\u6d3b\u8dc3\u7684\u4e8b\u4ef6\uff0c\u6bd4\u5982\u7528\u6237\u5145\u503c\r\n\r\n## \u9700\u6c42\r\n\r\n\u4ea7\u54c1\u7ed9\u51fa\u7684\u5173\u4e8e\u7559\u5b58\u5b9a\u4e49\u4e3a\uff1a**\u67d0\u5929\u5b8c\u6210\u4e86\u521d\u59cb\u4e8b\u4ef6\u7684\u5206\u6790\u4e3b\u4f53\uff0c\u5728\u521d\u59cb\u4e8b\u4ef6\u65e5\u671f\u540e\u7684\u7b2c 1 \u65e5\u81f3\u7b2c N \u65e5\u6709\u5b8c\u6210\u201c\u56de\u8bbf\u4e8b\u4ef6\u201d\uff0c\u5373\u4e3a\u7b2c N \u65e5\u7684\u201c\u7559\u5b58\u7528\u6237\u201d**\u3002", "top": 0, "createdAt": 1726134578, "style": "", "script": "", "head": "", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "createdDate": "2024-09-12", "dateLabelColor": "#bc4c00"}, "P18": {"htmlDir": "docs/post/ru-he-tong-guo-shu-ju-ku-quan-ju-suo-fang-shi-shi-xian-ren-wu-dan-jie-dian-zhi-xing.html", "labels": ["\u5f00\u53d1"], "postTitle": "\u5982\u4f55\u901a\u8fc7\u6570\u636e\u5e93\u5168\u5c40\u9501\u65b9\u5f0f\u5b9e\u73b0\u4efb\u52a1\u5355\u8282\u70b9\u6267\u884c", "postUrl": "post/ru-he-tong-guo-shu-ju-ku-quan-ju-suo-fang-shi-shi-xian-ren-wu-dan-jie-dian-zhi-xing.html", "postSourceUrl": "https://github.com/night1008/night1008.github.io/issues/18", "commentNum": 0, "wordCount": 2976, "description": "\u901a\u8fc7 `postgres` \u7684\u6570\u636e\u5e93\u884c\u7ea7\u522b\u7684\u9501\u673a\u5236\u5168\u5c40\u63a7\u5236\u6240\u6709\u7684\u4efb\u52a1\u53ea\u5728\u67d0\u4e2a\u8282\u70b9\u4e0a\u6267\u884c\r\n\r\n```go\r\npackage main\r\n\r\nimport (\r\n\t'context'\r\n\t'errors'\r\n\t'log'\r\n\t'time'\r\n\r\n\t'github.com/jackc/pgconn'\r\n\t'golang.org/x/sync/errgroup'\r\n\t'gorm.io/driver/postgres'\r\n\t'gorm.io/gorm'\r\n\t'gorm.io/gorm/clause'\r\n\t'gorm.io/gorm/logger'\r\n)\r\n\r\nconst (\r\n\tglobalJobLockGetPollingDuration = time.Second // \u5168\u5c40\u4efb\u52a1\u9501\u8f6e\u8be2\u65f6\u95f4\r\n\r\n\tServiceDeploymentNameGlobalJobLock = 'global-job-lock' // \u5168\u5c40\u4efb\u52a1\u9501\r\n)\r\n\r\ntype ServiceDeployment struct {\r\n\tName string `gorm:'primarykey'` // \u670d\u52a1\u540d\u79f0\r\n\r\n\tCreatedAt int64 `gorm:'autoCreateTime:milli'` // \u8bb0\u5f55\u521b\u5efa\u65f6\u95f4\uff0c\u5355\u4f4d milli\r\n\tUpdatedAt int64 `gorm:'autoUpdateTime:milli'` // \u8bb0\u5f55\u66f4\u65b0\u65f6\u95f4\uff0c\u5355\u4f4d milli\r\n}\r\n\r\nfunc main() {\r\n\tdsn := 'host=localhost user=postgres password=secret dbname=test port=5432 sslmode=disable'\r\n\tdb, err := gorm.Open(postgres.Open(dsn), &gorm.Config{})\r\n\tif err != nil {\r\n\t\tlog.Fatal(err)\r\n\t}\r\n\tif err := db.AutoMigrate(&ServiceDeployment{}); err != nil {\r\n\t\tlog.Fatal(err)\r\n\t}\r\n\r\n\tvar jobEnable bool\r\n\r\n\teg, ctx := errgroup.WithContext(context.Background())\r\n\teg.Go(func() error {\r\n\t\tticker := time.NewTicker(globalJobLockGetPollingDuration)\r\n\t\tdefer ticker.Stop()\r\n\r\n\t\tfor {\r\n\t\t\texist, err := GetGlobalJobLock(db)\r\n\t\t\tif err != nil {\r\n\t\t\t\tlog.Println(err)\r\n\t\t\t}\r\n\t\t\tif exist {\r\n\t\t\t\tjobEnable = true\r\n\t\t\t\tbreak\r\n\t\t\t}\r\n\r\n\t\t\tselect {\r\n\t\t\tcase <-ctx.Done():\r\n\t\t\t\treturn ctx.Err()\r\n\t\t\tcase <-ticker.C:\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn nil\r\n\t})\r\n\r\n\teg.Go(func() error {\r\n\t\tif err := stopTickerUntil(ctx, globalJobLockGetPollingDuration, func() bool {\r\n\t\t\treturn jobEnable\r\n\t\t}); err != nil {\r\n\t\t\treturn err\r\n\t\t}\r\n\t\treturn RunJob(ctx)\r\n\t})\r\n\r\n\tif err := eg.Wait(); err != nil {\r\n\t\tlog.Println(err)\r\n\t}\r\n}\r\n\r\nfunc FindOne(db *gorm.DB, out interface{}) (bool, error) {\r\n\tresult := db.First(out)\r\n\tif err := result.Error; err != nil {\r\n\t\tif errors.Is(err, gorm.ErrRecordNotFound) {\r\n\t\t\treturn false, nil\r\n\t\t}\r\n\t\treturn false, err\r\n\t}\r\n\treturn true, nil\r\n}\r\n\r\nfunc GetGlobalJobLock(db *gorm.DB) (bool, error) {\r\n\tdeployment := ServiceDeployment{\r\n\t\tName: ServiceDeploymentNameGlobalJobLock,\r\n\t}\r\n\tif err := db.FirstOrCreate(&deployment, ServiceDeployment{Name: ServiceDeploymentNameGlobalJobLock}).Error; err != nil {\r\n\t\treturn false, err\r\n\t}\r\n\r\n\ttx := db.Session(&gorm.Session{Logger: logger.Discard}).Begin() // \u4e0d\u6253\u5370\u9519\u8bef\u65e5\u5fd7\uff0c\u62ff\u5230\u9501\u4f1a\u5360\u7528\u4e00\u4e2a\u6570\u636e\u5e93\u8fde\u63a5\r\n\texist, err := FindOne(tx.Clauses(clause.Locking{Strength: 'UPDATE', Options: 'NOWAIT'}).Where('name = ?', ServiceDeploymentNameGlobalJobLock), &deployment)\r\n\tif err != nil {\r\n\t\tif pgErr, ok := err.(*pgconn.PgError); ok && pgErr.Code == '55P03' {\r\n\t\t\terr = nil\r\n\t\t}\r\n\t\t_ = tx.Rollback()\r\n\t}\r\n\treturn exist, err\r\n}\r\n\r\nfunc stopTickerUntil(ctx context.Context, duration time.Duration, stopFunc func() bool) error {\r\n\tticker := time.NewTicker(duration)\r\n\tdefer ticker.Stop()\r\n\r\nLoop:\r\n\tfor {\r\n\t\tselect {\r\n\t\tcase <-ctx.Done():\r\n\t\t\treturn ctx.Err()\r\n\t\tcase <-ticker.C:\r\n\t\t\tif stopFunc() {\r\n\t\t\t\tbreak Loop\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn nil\r\n}\r\n\r\nfunc RunJob(ctx context.Context) error {\r\n\t// run job\r\n\treturn nil\r\n}\r\n```\u3002", "top": 0, "createdAt": 1727420508, "style": "", "script": "", "head": "", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "createdDate": "2024-09-27", "dateLabelColor": "#bc4c00"}, "P19": {"htmlDir": "docs/post/Clickhouse -ru-he-shi-xian- LTV -fen-xi.html", "labels": ["\u5f00\u53d1"], "postTitle": "Clickhouse \u5982\u4f55\u5b9e\u73b0 LTV \u5206\u6790", "postUrl": "post/Clickhouse%20-ru-he-shi-xian-%20LTV%20-fen-xi.html", "postSourceUrl": "https://github.com/night1008/night1008.github.io/issues/19", "commentNum": 0, "wordCount": 16649, "description": "### \u80cc\u666f\r\n\r\nLTV \u662f Life Time Value \u7f29\u5199\uff0c\u5373\u7528\u6237\u5728\u751f\u547d\u5468\u671f\u4e2d\u8d21\u732e\u7684\u5546\u4e1a\u4ef7\u503c\u3002", "top": 0, "createdAt": 1728441690, "style": "", "script": "", "head": "", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "createdDate": "2024-10-09", "dateLabelColor": "#bc4c00"}, "P20": {"htmlDir": "docs/post/PostgreSQL -chi-you-xing-ji-bie-suo-hou-biao-zi-duan-bian-geng-shi-bai-de-wen-ti.html", "labels": ["\u5f00\u53d1"], "postTitle": "PostgreSQL \u6301\u6709\u884c\u7ea7\u522b\u9501\u540e\u8868\u5b57\u6bb5\u53d8\u66f4\u5931\u8d25\u7684\u95ee\u9898", "postUrl": "post/PostgreSQL%20-chi-you-xing-ji-bie-suo-hou-biao-zi-duan-bian-geng-shi-bai-de-wen-ti.html", "postSourceUrl": "https://github.com/night1008/night1008.github.io/issues/20", "commentNum": 0, "wordCount": 1485, "description": "### \u80cc\u666f\r\n\r\n\u6211\u4eec\u4f7f\u7528\u4e86 `PostgreSQL` \u8868\u7684\u8bb0\u5f55\u4f5c\u4e3a\u5168\u5c40\u4efb\u52a1\u7684\u5168\u5c40\u9501\uff0c\r\n\u5e76\u4e14\u4f7f\u7528\u7684\u662f `FOR UPDATE` \u7684\u884c\u7ea7\u522b\u9501\uff0c\r\n\u4f46\u5728\u9501\u5df2\u88ab\u8868\u6301\u6709\u7684\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u8981\u5bf9\u8868\u7ed3\u6784\u8fdb\u884c\u53d8\u66f4\u5b57\u6bb5\u7684\u8bdd\uff0c\u4f1a\u6267\u884c\u5931\u8d25\uff0c\r\n\u573a\u666f\u4e3a\u65e7\u90e8\u7f72\u670d\u52a1\u5df2\u6301\u6709\u4e86\u884c\u7ea7\u522b\u9501\uff0c\u65b0\u90e8\u7f72\u670d\u52a1\u5c31\u53d8\u66f4\u4e0d\u4e86\u8868\u7ed3\u6784\uff0c\r\n\u56e0\u4e3a DDL \u64cd\u4f5c\uff08\u5982\u6dfb\u52a0\u5217\uff09\u4f1a\u5bf9\u6574\u4e2a\u8868\u52a0\u9501\uff0c\u8fd9\u4e24\u8005\u53d1\u751f\u4e86\u51b2\u7a81\u3002", "top": 0, "createdAt": 1728554364, "style": "", "script": "", "head": "", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "createdDate": "2024-10-10", "dateLabelColor": "#bc4c00"}}, "singeListJson": {}, "labelColorDict": {"bug": "#ee0701", "duplicate": "#cccccc", "enhancement": "#84b6eb", "help wanted": "#128A0C", "invalid": "#e6e6e6", "question": "#cc317c", "wontfix": "#ffffff", "\u5f00\u53d1": "#1D76DB", "\u5f00\u53d1\u601d\u8def": "#30FA00", "\u751f\u6d3b": "#C1571D"}, "displayTitle": "Night1008", "faviconUrl": "https://github.githubassets.com/favicons/favicon.svg", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "primerCSS": "<link href='https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/Primer/21.0.7/primer.css' rel='stylesheet' />", "homeUrl": "https://night1008.github.io", "prevUrl": "/index.html", "nextUrl": "disabled"}