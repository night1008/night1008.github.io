---
layout: default
title: Python 建议
description: 记录一些关于Python的一些建议。
show_header: true
---

> python的pickle只能用于Python语言
> 解析xml最好用lxml


### 单例实现思路: 利用Python的 **模块机制**，
> 如果使用类的实现思路，还有考虑锁和重载问题。
>
> 1. 所有的变量都会绑定到模块上
> 2. 模块只初始化一次
> 3. import机制是线程安全的(在并发状态下模块也只有一个实例)
>
>	``` import module;
>	    module.run() ```


### mixni模式：
> 类的__bases__(是个元组)属性可以动态地指定基类。


> 发布订阅模式实现松耦合
>
> 日志系统
>
> python的message库


> 状态模式
>
> 可以避免使用过多的装饰器和判断代码
>
> python的state库

> 判断一个类是古典类还是新式类应该从其 __metaclass__ 上看，而不是从定义上看。
>  ```
>		class A:
>			pass
>		class B(object):
>			pass
> ```

###	__init__()不是类的构造方法
> 构造方法： __new__()，
>
> __init__()只是进行初始化，两者参数应该保持一致。
>
> __new__() 一般返回类的对象，若没有返回，则__init__()不会执行
>
> 当子类继承自不可变子类事，需要覆盖__new__()
>
> __new__() 可以用来实现工程模式
>
> 子类的__int__()不显示调用父类的__init__()时，父类的__init__()方法不会被调用


### 名字查找机制(LEGB)
>	局部作用域 -> 嵌套作用域 -> 全局作用域(仅限单个文件) -> 内置作用域(__builtin__)

### MRO(方法解析顺序, 适用于数据属性)
> 古典类中采用的是自左向右的深度优先算法，
>
> 新式类中可在__mro__中查看


### PEP8
> #### 缩进
> 使用4个空格作为缩进
>
> #### 异常类名
> 应该有后缀**ERROR**
>
> #### 方法名称
> 小写且用下划线分隔
>
> #### 方法参数
> **self** 作为实例方法的第一个参数，**cls** 作为类方法的第一个参数。
>
> 一些参数为关键字名称的，最好是关键字加上一个下划线后缀，比如，class_ 比 clss好。
>
> #### 方法名称和实例名称
> 前置的单个下划线表示非公共的方法名称和实例名称
>
> 前置的两个下划线表示不可被外部调用
>
> #### 常量
> 字母大写且用下划线分隔
>


### 编程建议
> 使用 **is** 判断是否为 None，而不是用=
>
>    使用 is not ... 而不要使用 not is ...