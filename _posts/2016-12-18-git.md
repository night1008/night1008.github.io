---
layout: default
title: Git 使用
description: ''
show_header: true
---

查看配置信息: ```
git config --list```


获取仓库

对本地的项目进行初始化

```
git init

git add . (选择想要入库的文件)

git commit -m 'initial project'
```

从远端获取: ```
git clone [git-url]  ([new-project-name])
```

当前文件状态检查: ```
git status
```

忽略文件(添加.gitignore文件)

```
# 注释
* 任意字符
! 取反
匹配模式最后跟反斜杠（/）说明要忽略的是目录。
```


文件对比

```
git diff (当前文件和暂存区域快照之间的差异)
git diff --cached(or --staged) (暂存文件和上次提交时的快照之间的差异)
```

提交跟新(跳过使用暂存区域)```
git commit -a -m 'comment'
```

删除文件

```
git rm [glob-mode(example: log/\*.log)]  (从工作目录中删除指定的文件)
git rm --cached [glob-mode(example: log/\*.log)]  (仅移除跟踪，但不删除本地文件)
```

移动文件: ```
git mv [file-from] [file-to]
```

查看提交记录:

```
git log -p -[n]   (-p选项展开显示每次提交的内容差异 -n则仅显示最近的n次更新)

git log -U1 --word-diff (-U1上下文的行数从默认的3行，减为1行 --word-diff单词层面的对比)

git log --stat (仅显示简要的增改行数统计)

git log -- [file-or-dir]  (文件或者目录的历史提交)
```

撤销操作

```
git commit --amend (修改最后一次提交)

git reset HEAD [file]  (取消已经暂存的文件)

git checkout -- [file]  (取消对文件的修改)
```

查看远程仓库: ```
git remote (-v  显示对应的克隆地址)
```

添加远程仓库: ```
git remote add [shortname] [url]
```

从远程仓库抓取数据: ```
git fetch [remote-name]  (只是将远端的数据拉到本地仓库，并不自动合并到当前工作分支)
```

推送数据到远程仓库: ```
git push [remote-name] [branch-name]
```

查看远程仓库信息: ```
git remote show [remote-name]
```

远程仓库的删除和重命名:

```
git remote rename [origin-name] [new-name]

git remote rm [remote-name]
```

查看标签: ```
git tag (-l [glob-mode('v1.4.2.*')] 搜索)
```

添加含附注的标签: ```
git tag -a [version-name] -m [comment]

git tag -s [version-name] -m [comment]  (签署标签)

git tag -a [version-name] [commit-hash] (给历史提交打标签)
```

分享标签: ```
git push origin [tagname]  (--tags 推送所有本地新增标签)
```

运行某个外部命令，而非 Git 的子命令，只需要在命令前加上 ! 就行, 比如: ```
git config --global alias.visual '!gitk'
```

创建分支: ```
git branch <branch-name> (仅是建立了一个新的分支，但不会自动切换到这个分支中)```

切换分支: ```
git checkout <branch-name>```

创建并切换分支: ```
git checkout -b <branch-name>```

合并分支: ```
git merge <branch-name> (合并branch-name到当前分支)```

删除分支: ```
git checkout -d(-D 强制删除) <branch-name>```

解决合并冲突: ```
<<<<<<< HEAD (当前分值)
>>>>>>> <branch-name> (需合并的分支)```

罗列分支:
```git branch (-v(各个分支最后一个提交对象的信息)  --merged(查看哪些分支已被并入当前分支)  --no-merged(查看尚未合并的分支))

一次 Git 克隆会建立你自己的本地分支 master 和远端分支 origin/master，并且将它们都指向 origin 上的 master 分支

远端分支（remote branch）是对远端仓库中的分支的索引，它们是一些无法移动的本地分支，只有在 Git 进行网络交互时才会更新。

同步远程服务器上的数据到本地(只是拥有一个无法移动的[remote-name]/[branch-name]指针): ```
git fetch [remote-name](比如origin)```
此时还需要merge操作， ```
git merge [remote-name]/[branch-name]```
等价于， ```
git checkout -b [local-branch-name] [remote-name]/[branch-name]```

从远程分支 checkout 出来的本地分支，称为 跟踪分支 (tracking branch)。在克隆仓库时，Git 通常会自动创建一个名为 master 的分支来跟踪 origin/master。因此可以使用git push 和 git pull。

推送本地分支到远端: ```
git push [remote-name] [local-branch-name]:[remote-branch-name]```


删除远端分支: ```
git push [remote-name] :[branch-name]
```

衍合(rebase)可以把在一个分支里提交的改变移到另一个分支里重放一遍，产生一个更为整洁的提交历史。
```
git checkout [need-rebase-branch]

git rebase master
```

对一个特性分支里再分出一个特性分支的衍合: ```
git rebase [main-branch] [feature-branch]```
例子:```
git rebase --onto master server client(取出 client 分支，找出 client 分支和 server 分支的共同祖先之后的变化，然后把它们在 master 上重演一遍，--onto 选项指定新的基底分支 master)```

衍合遵守准则：```
一旦分支中的提交对象发布到公共仓库，就千万不要对该分支进行衍合操作。```